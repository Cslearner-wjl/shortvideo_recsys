短视频分析推荐系统 - 设计开发流程说明书

核心链路：用户上传视频 -> Flume收集日志 -> Kafka消息队列 -> Spark处理 -> 存入数据库 -> 推荐算法计算 -> 反馈给用户端。

1. 总体架构设计 (Architecture Design)
目标：确立系统的技术骨架，分为前端、服务端和大数据三部分。

1.1 大数据架构设计 (核心引擎)
技术选型：

日志收集：Flume + Kafka (负责高吞吐量的日志采集与缓冲)。
离线存储：Hadoop HDFS (存储历史日志信息，用于离线训练)。
数据处理与分析：Spark。
推荐模型：使用 Spark MLlib 训练 ALS (交替最小二乘法) 协同过滤模型，预测用户喜好。
实时计算：Spark Streaming 进行实时数据分析。
缓存存储：分析结果写入 Redis 内存数据库，以实现毫秒级推荐响应。

1.2 服务端架构设计 (业务中台)
负责处理业务逻辑、API 接口及与数据库交互。
架构模式：采用分层架构（控制层 Controller、业务逻辑 Service、持久层 DAO）。
技术栈：
语言：Java
核心框架：SpringBoot
MVC框架：SpringMVC
ORM框架：MybatisPlus (简化SQL操作)
数据库：MySQL (存储用户信息、视频元数据等结构化数据)

1.3 前端架构设计 (交互界面)
用户前端 (web)：
要求：设计要求高，注重用户体验与流畅度。
技术：Vue3 + ECharts
管理后台 (Admin)：
用于内容审核与数据监控。
构建环境：Node.js。

2. 详细设计 (Detailed Design)
目标：将架构落地为代码结构。

2.1 实体与类设计
定义实体 (Entity)：根据业务对象定义 Java Bean (如...)。
主要函数或方法：定义 Service 层的核心接口（如）。
2.2 UI 原型设计
UI设计工作：绘制高保真原型图，确定页面布局和交互逻辑。

3. 数据库与存储设计 (Database Design)
目标：规划数据存储结构。

3.1 ER 模型设计
绘制实体关系图 (ER Diagram)，理清用户、视频、日志、评论之间的关联。
3.2 数据库表结构
设计 MySQL 表结构（主键、外键、索引优化）。
设计 Redis Key-Value 结构（用于存储热门视频列表、用户推荐队列）。

4. 测试设计 (Testing)
目标：确保系统稳定性与推荐准确性。

4.1 功能测试用例
正常数据输入：验证预期输出结果（如：用户点赞后，推荐权重是否增加）。
异常数据输入：验证系统容错能力（如：网络中断、非法字符输入）。
4.2 性能测试 (隐含)
测试 Kafka 在高并发下的吞吐量及 Spark 任务的延迟。

5. 迭代流程（里程碑切分）

根据“业务系统 + 大数据链路 + 推荐算法”的复杂度，迭代节奏为“先可用、后增强”：

M0：工程骨架与环境可跑（1 次性）
    · monorepo 结构、docker-compose、基础 CI（至少本地一键启动）
    · 产物：空页面 + 健康检查 API + 基础库可运行

M1：业务闭环（先不引入大数据）
    · 用户/鉴权、视频上传/审核/播放、行为记录（播放/点赞/评论/收藏）、热门榜单（MySQL 聚合 + 定时任务/触发器）
    · 产物：普通用户能刷视频+互动；管理员能审核与管理；热门榜单可用
    · 推荐：先做“热门 + 随机 + 偏好标签”规则推荐

M2：数据看板（业务统计）
    · 日播放趋势、用户增长、TopN 热门、活跃度等（可直接基于 MySQL 汇总）


M3：大数据链路接入（Flume/Kafka/Spark/Redis）
    · 把行为数据从“只写 MySQL”升级为“日志 -> Kafka -> Spark Streaming -> Redis/MySQL”
    · 产物：实时热门榜/实时计数可用；推荐读取 Redis（毫秒级）

M4：离线协同过滤 ALS（Spark MLlib）
    用 HDFS 历史日志训练 ALS，产出用户 TopN 推荐写 Redis 
