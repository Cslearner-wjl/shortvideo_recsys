# 变更提案: M2.2 用户前端基础页面与联调

## 需求背景
当前用户端仅有空页面骨架，无法完成登录、视频浏览与互动、排行榜等核心链路，需要补齐基础页面与接口联调以满足 M2.2 目标。

## 产品分析

### 目标用户与场景
- **用户群体:** 普通用户、内容消费者
- **使用场景:** 登录/注册、浏览推荐视频、互动、查看热门榜
- **核心痛点:** 目前无法完成完整使用流程，缺少最基本可用页面

### 价值主张与成功指标
- **价值主张:** 提供可用的用户端基础体验与联调能力
- **成功指标:** 登录/注册成功、视频流可加载与播放上报、互动计数更新、热门榜可展示

### 人文关怀
仅收集必要信息，登录态在本地保存并可随时清除，避免多余数据留存。

## 变更内容
1. 新增用户端路由与基础页面（登录、注册、视频流、热门榜）。
2. 封装 API client 与鉴权 token 存储策略。
3. 实现视频播放与互动组件（点赞/收藏/评论）并更新本地计数。
4. 提供最小样式与运行/环境说明。

## 影响范围
- **模块:** frontend-user
- **文件:** frontend/user/src/*
- **API:** /api/recommendations 或 /api/videos/feed、/api/videos/{id}/play、/api/rank/hot、登录/注册/验证码、点赞/收藏/评论接口
- **数据:** 无新增数据结构

## 核心场景

### 需求 登录与注册
**模块:** frontend-user
完成用户登录、注册、验证码获取与倒计时展示。

#### 场景: 登录
输入账号密码后提交，成功后进入视频流页并携带 token。

#### 场景: 注册与验证码
填写注册信息并获取验证码，倒计时结束可重新获取。

### 需求 视频流与播放
**模块:** frontend-user
视频流页拉取推荐/流接口，点击播放时调用播放上报接口。

#### 场景: 浏览视频流
页面加载时请求视频列表并可滚动浏览。

#### 场景: 播放上报
用户点击播放按钮或视频区域，触发播放上报请求。

### 需求 互动组件
**模块:** frontend-user
点赞、收藏、评论操作调用接口并更新本地计数。

#### 场景: 互动操作
点击操作后立即更新本地计数，失败时回滚并提示。

### 需求 热门榜
**模块:** frontend-user
热门榜页面请求接口并展示列表。

#### 场景: 查看热门榜
页面加载时请求 /api/rank/hot 展示结果。

## 风险评估
- **风险:** 登录/注册/互动接口路径与参数可能与实际后端不一致
- **缓解:** 在开发实施阶段对照后端文档或代码确认接口
- **风险:** token 存储在 localStorage 存在 XSS 风险
- **缓解:** 仅存储必要 token，统一读写入口，避免在 UI 中直接渲染敏感内容
